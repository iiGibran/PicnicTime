<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name="theme-color" content="#0a84ff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="apple-mobile-web-app-title" content="WorkRIT"><title>WorkRIT</title><link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Crect width='128' height='128' rx='28' fill='%230a84ff'/%3E%3Cpath d='M64 26a38 38 0 1 0 0 76a38 38 0 0 0 0-76Zm0 10a28 28 0 1 1 0 56a28 28 0 0 1 0-56Zm-4 14h8v18l14 8l-4 7l-18-10V50Z' fill='white'/%3E%3C/svg%3E"><link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Crect width='180' height='180' rx='40' fill='%230a84ff'/%3E%3Cpath d='M90 36a54 54 0 1 0 0 108a54 54 0 0 0 0-108Zm0 14a40 40 0 1 1 0 80a40 40 0 0 1 0-80Zm-6 20h12v26l20 12l-6 10l-26-16V70Z' fill='white'/%3E%3C/svg%3E"><style>
:root{--bg:#0b0b0f;--card:#14141a;--muted:#9aa0a6;--text:#f2f3f5;--accent:#0a84ff;--danger:#ff453a;--ok:#30d158;--line:rgba(255,255,255,.08)}
@media (prefers-color-scheme: light){:root{--bg:#f5f5f7;--card:#ffffff;--muted:#6b7280;--text:#111827;--accent:#0a84ff;--danger:#dc2626;--ok:#16a34a;--line:rgba(17,24,39,.08)}}
*{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text)}
.wrap{max-width:680px;margin:0 auto;padding:18px 14px 40px}
.top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:6px 2px 14px}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:38px;height:38px;border-radius:12px;background:var(--accent);display:grid;place-items:center;color:white;font-weight:800}
h1{font-size:18px;margin:0}
.sub{font-size:12px;color:var(--muted);margin-top:2px}
.tabs{display:flex;gap:8px}
.tab{border:1px solid var(--line);background:transparent;color:var(--text);padding:8px 10px;border-radius:12px;font-weight:600;font-size:13px}
.tab.active{background:var(--card);border-color:transparent;box-shadow:0 1px 0 rgba(0,0,0,.08)}
.card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:14px}
.grid{display:grid;grid-template-columns:1fr;gap:10px}
@media(min-width:520px){.grid{grid-template-columns:1fr 1fr}}
.field{display:flex;flex-direction:column;gap:6px}
label{font-size:12px;color:var(--muted);font-weight:700;letter-spacing:.2px}
input[type="time"],input[type="date"]{width:100%;padding:12px 12px;border-radius:12px;border:1px solid var(--line);background:transparent;color:var(--text);font-size:16px;outline:none}
.row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.btn{border:0;border-radius:12px;padding:12px 14px;font-weight:800;font-size:14px}
.btn.primary{background:var(--accent);color:white;flex:1;min-width:140px}
.btn.ghost{background:transparent;color:var(--text);border:1px solid var(--line)}
.btn.danger{background:var(--danger);color:white}
.kpis{display:grid;grid-template-columns:1fr;gap:10px;margin-top:12px}
@media(min-width:520px){.kpis{grid-template-columns:1fr 1fr}}
.kpi{border:1px solid var(--line);border-radius:14px;padding:12px}
.kpi .t{font-size:12px;color:var(--muted);font-weight:700}
.kpi .v{font-size:20px;font-weight:900;margin-top:6px}
.kpi .h{font-size:12px;color:var(--muted);margin-top:6px}
.sep{height:1px;background:var(--line);margin:14px 0}
.list{display:flex;flex-direction:column;gap:8px}
.item{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px;border:1px solid var(--line);border-radius:14px}
.item .left{display:flex;flex-direction:column;gap:4px}
.item .d{font-weight:900}
.item .m{font-size:12px;color:var(--muted)}
.pill{padding:8px 10px;border-radius:999px;border:1px solid var(--line);font-weight:900}
.pill.ok{border-color:rgba(48,209,88,.35);color:var(--ok)}
.pill.muted{color:var(--muted)}
.small{font-size:12px;color:var(--muted);line-height:1.35}
.footer{margin-top:14px}
.notice{padding:12px;border-radius:14px;border:1px dashed var(--line);color:var(--muted);font-size:12px}
a{color:var(--accent);text-decoration:none}
.hidden{display:none}
</style></head><body><div class="wrap"><div class="top"><div class="brand"><div class="logo">R</div><div><h1>WorkRIT</h1><div class="sub" id="subtitle"></div></div></div><div class="tabs"><button class="tab active" id="tabToday">Today</button><button class="tab" id="tabWeek">Week</button></div></div>

<div id="viewToday" class="card">
<div class="grid">
<div class="field"><label>Date</label><input id="date" type="date"></div>
<div class="field"><label>Check In</label><input id="checkIn" type="time" step="60"></div>
<div class="field"><label>RIT Start</label><input id="ritStart" type="time" step="60"></div>
<div class="field"><label>RIT End</label><input id="ritEnd" type="time" step="60"></div>
<div class="field"><label>Check Out</label><input id="checkOut" type="time" step="60"></div>
</div>

<div class="row">
<button class="btn primary" id="saveBtn">Save day</button>
<button class="btn ghost" id="fillNowBtn">Fill now</button>
<button class="btn danger" id="deleteBtn">Delete day</button>
</div>

<div class="kpis" id="kpis">
<div class="kpi"><div class="t">RIT Time</div><div class="v" id="kRit">--</div><div class="h" id="hRit">RIT End − RIT Start</div></div>
<div class="kpi"><div class="t">Total Worked Today</div><div class="v" id="kTotal">--</div><div class="h" id="hTotal">(Check Out − Check In) − RIT Time</div></div>
</div>

<div class="sep"></div>

<div class="kpis">
<div class="kpi"><div class="t">This Week Total</div><div class="v" id="kWeek">--</div><div class="h" id="hWeek"></div></div>
<div class="kpi"><div class="t">Days Saved This Week</div><div class="v" id="kDays">--</div><div class="h">Only days in the current week are counted</div></div>
</div>

<div class="footer"><div class="notice">Tip: Add to Home Screen in Safari: Share → Add to Home Screen.</div></div>
</div>

<div id="viewWeek" class="card hidden">
<div class="small" id="weekRange"></div>
<div class="sep"></div>
<div class="list" id="weekList"></div>
<div class="sep"></div>
<div class="kpis">
<div class="kpi"><div class="t">Weekly Total</div><div class="v" id="wkTotal">--</div><div class="h">Sum of Total Worked for this week</div></div>
<div class="kpi"><div class="t">Export / Backup</div><div class="v" style="font-size:14px;font-weight:900">JSON</div><div class="h"><a href="#" id="exportBtn">Download backup</a> · <a href="#" id="importBtn">Import backup</a></div></div>
</div>
<input id="importFile" type="file" accept="application/json" class="hidden">
</div>

</div>

<script>
const SKEY="workrit_entries_v1"
const $=id=>document.getElementById(id)
const tabToday=$("tabToday"),tabWeek=$("tabWeek"),viewToday=$("viewToday"),viewWeek=$("viewWeek")
const dateEl=$("date"),checkInEl=$("checkIn"),ritStartEl=$("ritStart"),ritEndEl=$("ritEnd"),checkOutEl=$("checkOut")
const saveBtn=$("saveBtn"),deleteBtn=$("deleteBtn"),fillNowBtn=$("fillNowBtn")
const kRit=$("kRit"),kTotal=$("kTotal"),kWeek=$("kWeek"),kDays=$("kDays"),hWeek=$("hWeek"),subtitle=$("subtitle")
const weekRange=$("weekRange"),weekList=$("weekList"),wkTotal=$("wkTotal"),exportBtn=$("exportBtn"),importBtn=$("importBtn"),importFile=$("importFile")
const pad=n=>String(n).padStart(2,"0")
const toYMD=d=>`${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`
const parseTime=(ymd,hm)=>{if(!hm||!ymd)return null;const [H,M]=hm.split(":").map(Number);const [y,m,da]=ymd.split("-").map(Number);return new Date(y,m-1,da,H,M,0,0)}
const msBetween=(a,b)=>a&&b?b.getTime()-a.getTime():null
const clampNonNeg=ms=>ms==null?null:Math.max(0,ms)
const fmtDur=ms=>{if(ms==null)return"--";ms=Math.round(ms/60000)*60000;const totalMin=Math.max(0,Math.floor(ms/60000));const h=Math.floor(totalMin/60),m=totalMin%60;return `${h}h ${pad(m)}m`}
const weekStart=d=>{const c=new Date(d.getFullYear(),d.getMonth(),d.getDate(),12,0,0,0);const day=(c.getDay()+6)%7;c.setDate(c.getDate()-day);c.setHours(0,0,0,0);return c}
const weekEndExclusive=d=>{const s=weekStart(d);const e=new Date(s);e.setDate(e.getDate()+7);return e}
const inRange=(d,start,endEx)=>d>=start&&d<endEx
const load=()=>{try{const raw=localStorage.getItem(SKEY);if(!raw)return{};const obj=JSON.parse(raw);return obj&&typeof obj==="object"?obj:{}}catch{return{}}}
const saveAll=obj=>localStorage.setItem(SKEY,JSON.stringify(obj))
const getEntry=ymd=>load()[ymd]||null
const setEntry=(ymd,entry)=>{const all=load();all[ymd]=entry;saveAll(all)}
const delEntry=ymd=>{const all=load();delete all[ymd];saveAll(all)}
const computeForInputs=()=>{const ymd=dateEl.value;const ci=parseTime(ymd,checkInEl.value);const rs=parseTime(ymd,ritStartEl.value);const re=parseTime(ymd,ritEndEl.value);const co=parseTime(ymd,checkOutEl.value);const rit=clampNonNeg(msBetween(rs,re));const span=clampNonNeg(msBetween(ci,co));let total=null;if(span!=null&&rit!=null)total=clampNonNeg(span-rit);return{ymd,ci,rs,re,co,rit,total}}
const renderTodayKPIs=()=>{const r=computeForInputs();kRit.textContent=fmtDur(r.rit);kTotal.textContent=fmtDur(r.total);renderWeekSummary()}
const weekEntries=()=>{const all=load();const now=new Date();const ws=weekStart(now),we=weekEndExclusive(now);const rows=[];for(const [ymd,entry] of Object.entries(all)){const d=new Date(ymd+"T00:00:00");if(inRange(d,ws,we))rows.push({ymd,entry})}rows.sort((a,b)=>a.ymd.localeCompare(b.ymd));return{ws,we,rows}}
const calcEntryTotal=entry=>{const ymd=entry.ymd;const ci=parseTime(ymd,entry.checkIn);const rs=parseTime(ymd,entry.ritStart);const re=parseTime(ymd,entry.ritEnd);const co=parseTime(ymd,entry.checkOut);const rit=clampNonNeg(msBetween(rs,re));const span=clampNonNeg(msBetween(ci,co));if(span==null||rit==null)return null;return clampNonNeg(span-rit)}
const renderWeekSummary=()=>{const {ws,we,rows}=weekEntries();let sum=0,days=0;for(const r of rows){const t=calcEntryTotal({ymd:r.ymd,...r.entry});if(t!=null){sum+=t;days++}}kWeek.textContent=fmtDur(sum);kDays.textContent=String(days);hWeek.textContent=`${toYMD(ws)} → ${toYMD(new Date(we.getTime()-86400000))}`;subtitle.textContent=`Week: ${toYMD(ws)} → ${toYMD(new Date(we.getTime()-86400000))}`}
const renderWeekView=()=>{const now=new Date();const ws=weekStart(now),we=weekEndExclusive(now);weekRange.textContent=`${toYMD(ws)} → ${toYMD(new Date(we.getTime()-86400000))}`;const all=load();const days=[];for(let i=0;i<7;i++){const d=new Date(ws);d.setDate(d.getDate()+i);const ymd=toYMD(d);const e=all[ymd]||null;days.push({d,ymd,e})}weekList.innerHTML="";let sum=0;for(const day of days){let pillClass="muted",pillText="No entry";if(day.e){const t=calcEntryTotal({ymd:day.ymd,...day.e});if(t!=null){pillClass="ok";pillText=fmtDur(t);sum+=t}else{pillClass="muted";pillText="Incomplete"}}const name=day.d.toLocaleDateString(undefined,{weekday:"long"});const dstr=day.d.toLocaleDateString(undefined,{month:"short",day:"numeric"});const item=document.createElement("div");item.className="item";item.innerHTML=`<div class="left"><div class="d">${name}</div><div class="m">${dstr} · ${day.ymd}</div></div><div class="pill ${pillClass}">${pillText}</div>`;item.addEventListener("click",()=>{switchToToday();dateEl.value=day.ymd;loadIntoForm(day.ymd)});weekList.appendChild(item)}wkTotal.textContent=fmtDur(sum)}
const loadIntoForm=ymd=>{const e=getEntry(ymd);if(e){checkInEl.value=e.checkIn||"";ritStartEl.value=e.ritStart||"";ritEndEl.value=e.ritEnd||"";checkOutEl.value=e.checkOut||""}else{checkInEl.value="";ritStartEl.value="";ritEndEl.value="";checkOutEl.value=""}renderTodayKPIs()}
const switchToToday=()=>{tabToday.classList.add("active");tabWeek.classList.remove("active");viewToday.classList.remove("hidden");viewWeek.classList.add("hidden");renderWeekSummary()}
const switchToWeek=()=>{tabWeek.classList.add("active");tabToday.classList.remove("active");viewWeek.classList.remove("hidden");viewToday.classList.add("hidden");renderWeekView()}
tabToday.addEventListener("click",switchToToday)
tabWeek.addEventListener("click",switchToWeek)
const validate=()=>{const r=computeForInputs();if(!r.ymd)return{ok:false,msg:"Pick a date"};if(!checkInEl.value||!ritStartEl.value||!ritEndEl.value||!checkOutEl.value)return{ok:false,msg:"Fill all times"};const orderOk=(r.ci<=r.rs)&&(r.rs<=r.re)&&(r.re<=r.co);if(!orderOk)return{ok:false,msg:"Times must be in order"};return{ok:true,msg:""}}
saveBtn.addEventListener("click",()=>{const v=validate();if(!v.ok){alert(v.msg);return}const ymd=dateEl.value;setEntry(ymd,{checkIn:checkInEl.value,ritStart:ritStartEl.value,ritEnd:ritEndEl.value,checkOut:checkOutEl.value});renderTodayKPIs();alert("Saved")})
deleteBtn.addEventListener("click",()=>{const ymd=dateEl.value;if(!ymd){alert("Pick a date");return}if(confirm("Delete this day?")){delEntry(ymd);loadIntoForm(ymd);renderWeekSummary();alert("Deleted")}})
fillNowBtn.addEventListener("click",()=>{const now=new Date();const hh=pad(now.getHours()),mm=pad(now.getMinutes());const t=`${hh}:${mm}`;if(!checkInEl.value)checkInEl.value=t;else if(!ritStartEl.value)ritStartEl.value=t;else if(!ritEndEl.value)ritEndEl.value=t;else if(!checkOutEl.value)checkOutEl.value=t;renderTodayKPIs()})
;[dateEl,checkInEl,ritStartEl,ritEndEl,checkOutEl].forEach(el=>el.addEventListener("input",renderTodayKPIs))
exportBtn.addEventListener("click",(e)=>{e.preventDefault();const data=localStorage.getItem(SKEY)||"{}";const blob=new Blob([data],{type:"application/json"});const url=URL.createObjectURL(blob);const a=document.createElement("a");a.href=url;a.download="workrit-backup.json";document.body.appendChild(a);a.click();a.remove();setTimeout(()=>URL.revokeObjectURL(url),500)})
importBtn.addEventListener("click",(e)=>{e.preventDefault();importFile.click()})
importFile.addEventListener("change",async()=>{const f=importFile.files&&importFile.files[0];if(!f)return;try{const txt=await f.text();const obj=JSON.parse(txt);if(!obj||typeof obj!=="object")throw new Error("bad");localStorage.setItem(SKEY,JSON.stringify(obj));alert("Imported");renderTodayKPIs();renderWeekView()}catch{alert("Import failed")}importFile.value=""})
const init=()=>{const today=toYMD(new Date());dateEl.value=today;loadIntoForm(today);renderWeekSummary()}
init()
</script></body></html>